<div class="container">
    <form [formGroup]="filterForm" (ngSubmit)="filterData()">
        <div class="horizontal-container">
            <mat-form-field>
                <mat-label>Từ ngày</mat-label>
                <input
                    matInput
                    [matDatepickerFilter]="disableFuture"
                    [matDatepicker]="pickerFrom"
                    formControlName="dateFrom"
                >
                <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
                <mat-datepicker #pickerFrom></mat-datepicker>
            </mat-form-field>
            <div class="width-container"></div>
            <mat-form-field>
                <mat-label>Đến ngày</mat-label>
                <input
                    matInput
                    [matDatepickerFilter]="disableFuture"
                    [matDatepicker]="pickerTo"
                    formControlName="dateTo"
                >
                <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
                <mat-datepicker #pickerTo></mat-datepicker>
            </mat-form-field>
            <div class="width-container"></div>
            <mat-form-field>
                <mat-select
                    class="selectInsurer"
                    formControlName="insurer_id"
                    placeholder="Nhà Bảo Hiểm"
                    required
                >
                    <mat-option value='all' class="firstSelectInsurerOption">Tất cả</mat-option>
                    <mat-option class="selectInsurerOption" *ngFor="let insurer of insurers" [value]="insurer.ID">
                        <span>{{ insurer.short_name ? insurer.short_name : 'Tên nhà Bảo Hiểm' }}</span>
                        <img *ngIf="insurer.logo" src="{{ insurer.logo }}">
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <div class="width-container"></div>
            <mat-form-field>
                <mat-label>Số bản ghi</mat-label>
                <mat-select formControlName="numberOfRecord">
                    <mat-option *ngFor="let numberOfRecord of numberOfRecords" [value]="numberOfRecord">
                        {{numberOfRecord | number}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="height-container"></div>
        <button type="submit" [disabled]="!filterForm.valid">
            <mat-icon>cloud_download</mat-icon>
            <span>Xuất dữ liệu</span>
        </button>
    </form>
    <!-- <div class="height-container"></div>
    <div class="mat-elevation-z8 table-container" *ngIf="history && history.data">
        <table mat-table [dataSource]="history.data" matSort class="mat-elevation-z8">
            
            <ng-container matColumnDef="fullname" sticky>
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Tên người được bảo hiểm</th>
                <td mat-cell *matCellDef="let element"> {{element.fullname}} </td>
            </ng-container>
    
            <ng-container matColumnDef="dob">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Ngày tháng năm sinh</th>
                <td mat-cell *matCellDef="let element"> {{element.dob | date:'dd/MM/yyyy'}} </td>
            </ng-container>
    
            <ng-container matColumnDef="cmnd">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>CMND</th>
                <td mat-cell *matCellDef="let element"> {{element.cmnd}} </td>
            </ng-container>
    
            <ng-container matColumnDef="policy_no">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Số hợp đồng</th>
                <td mat-cell *matCellDef="let element"> {{element.policy_no}} </td>
            </ng-container>
    
            <ng-container matColumnDef="isurance_id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Công ty bảo hiểm</th>
                <td mat-cell *matCellDef="let element"> {{insurers[element.isurance_id-1].name}} </td>
            </ng-container>
    
            <ng-container matColumnDef="ID">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Mã Định Danh</th>
                <td mat-cell *matCellDef="let element"> {{element.ID}} </td>
            </ng-container>
    
             <ng-container matColumnDef="note">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Case number</th>
                <td mat-cell *matCellDef="let element"> {{element.note}} </td>
            </ng-container>
    
             <ng-container matColumnDef="created_at">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Ngày xảy ra sự kiện</th>
                <td mat-cell *matCellDef="let element"> {{element.created_at | date:'dd/MM/yyyy HH:mm:ss'}} </td>
            </ng-container>

             <ng-container matColumnDef="finished_at">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Ngày kết thúc sự kiện</th>
                <td mat-cell *matCellDef="let element"> {{ (element.created_at | nextDay) | date:'dd/MM/yyyy HH:mm:ss'}} </td>
            </ng-container>
    
            <ng-container matColumnDef="hospitalCosts">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Chi phí phát sinh</th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.hospitalCosts && element.hospitalCosts.costs">{{ countTotal(element.hospitalCosts.costs) | currency:"VND"}}</span>
                </td>
            </ng-container>
    
            <ng-container matColumnDef="insmartCosts">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Chi phí bảo lãnh</th>
                <td mat-cell *matCellDef="let element"> {{ element.insmartCosts ? (countTotal(element.insmartCosts.costs) | currency:"VND") : ''}} </td>
            </ng-container>
    
            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Loại hình bảo lãnh</th>
                <td mat-cell *matCellDef="let element"> {{'Outpatient Claim'}} </td>
            </ng-container>
    
            <ng-container matColumnDef="diag_note">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Chẩn đoán</th>
                <td mat-cell *matCellDef="let element"> {{element.insmartCosts ? element.insmartCosts.cost_details.diag_note : ''}} </td>
            </ng-container>

            <ng-container matColumnDef="hospital_name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Cơ sở y tế</th>
                <td mat-cell *matCellDef="let element"> {{element.hospital_user.hospital.hospital_name}} </td>
            </ng-container>
    
            <ng-container matColumnDef="last_time">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Thời gian bổ sung cuối cùng</th>
                <td mat-cell *matCellDef="let element"> {{''}} </td>
            </ng-container>
    
            <ng-container matColumnDef="updated_at">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Thời gian xác nhận bảo lãnh</th>
                <td mat-cell *matCellDef="let element"> {{element.updated_at | date:'dd/MM/yyyy HH:mm:ss' }} </td>
            </ng-container>
    
            <ng-container matColumnDef="insmart_status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Trạng Thái Bảo Lãnh</th>
                <td mat-cell *matCellDef="let element"> {{element.insmart_status}} </td>
            </ng-container>
    
            <ng-container matColumnDef="reasons">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Lý do từ chối</th>
                <td mat-cell *matCellDef="let element">
                    <span *ngIf="element.reason && element.reason.reasons">{{element.insmart_status === 'REJECT' ? element.reason.reasons : ''}}</span>
                </td>
            </ng-container>
    
            <ng-container matColumnDef="insmart_user">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Tên nhân viên xác nhận</th>
                <td mat-cell *matCellDef="let element"> {{element.insmart_user.fullname}} </td>
            </ng-container>
            
            <mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    
        </table>
        
    </div>
    <div class="height-container"></div>
    <div class="button-container">
        <button (click)="exportData()">Xuất dữ liệu</button>
    </div> -->
</div>